<!doctype html>
<html lang="ja">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>Quiz Buzzer - Host</title>
  <style>
    body{font-family:system-ui, -apple-system, "Hiragino Kaku Gothic ProN", "Noto Sans JP", sans-serif;padding:20px;max-width:900px;margin:auto;position:relative}
    textarea{width:100%;height:120px}
    .hidden{display:none !important}
    
    /* Notification effects for admin */
    .player-correct-notification {
      position: fixed;
      top: 20px;
      right: 20px;
      padding: 16px 24px;
      background: #4CAF50;
      color: white;
      border-radius: 8px;
      font-size: 1.2rem;
      font-weight: bold;
      box-shadow: 0 4px 12px rgba(0,0,0,0.3);
      animation: slideInRight 0.3s ease-out, fadeOut 0.5s ease-out 2.5s forwards;
      z-index: 9999;
    }
    
    .player-incorrect-notification {
      position: fixed;
      top: 20px;
      right: 20px;
      padding: 16px 24px;
      background: #f44336;
      color: white;
      border-radius: 8px;
      font-size: 1.2rem;
      font-weight: bold;
      box-shadow: 0 4px 12px rgba(0,0,0,0.3);
      animation: slideInRight 0.3s ease-out, fadeOut 0.5s ease-out 2.5s forwards;
      z-index: 9999;
    }
    
    @keyframes slideInRight {
      from { transform: translateX(400px); opacity: 0; }
      to { transform: translateX(0); opacity: 1; }
    }
    
    @keyframes fadeOut {
      from { opacity: 1; }
      to { opacity: 0; }
    }
  </style>
</head>
<body>
  <h1>å‡ºé¡Œè€…ç”»é¢</h1>
  <div>
    <label>ãƒ«ãƒ¼ãƒ ID: <input id="roomId" value="default-room" /></label>
    <button id="joinBtn">ç®¡ç†ã‚’é–‹å§‹</button>
  </div>

  <div id="adminControls" class="hidden">
    <div style="margin-top:12px">
      <button id="qrBtn">QRã‚’ç”Ÿæˆ</button>
      <div id="qr"></div>
    </div>

    <h3>ãƒ¢ãƒ¼ãƒ‰</h3>
    <button data-mode="human" class="modeBtn">äººãŒèª­ã¿ä¸Šã’ã‚‹ï¼ˆæ—©æŠ¼ã—ãƒœã‚¿ãƒ³ï¼‰</button>
    <div style="display:flex;gap:8px;align-items:center;margin-top:6px">
      <button data-mode="auto" class="modeBtn">æ©Ÿæ¢°ãŒèª­ã¿ä¸Šã’ã‚‹ï¼ˆå•é¡Œãƒªã‚¹ãƒˆï¼‰</button>
      <label style="font-size:0.9rem">é–“éš”ç§’: <input id="autoInterval" value="10" style="width:60px" /></label>
    </div>
    <div style="display:flex;gap:8px;align-items:center;margin-top:6px">
      <label style="font-size:0.9rem">æ®‹ã‚ŠãŒ <input id="refillThreshold" value="2" style="width:40px" /> ä»¶ä»¥ä¸‹ã«ãªã£ãŸã‚‰</label>
      <label style="font-size:0.9rem">è‡ªå‹•ç”Ÿæˆæ•°: <input id="refillCount" value="5" style="width:40px" /></label>
    </div>
    <div style="display:flex;gap:8px;align-items:center;margin-top:6px">
      <label style="font-size:0.9rem">ã‚¸ãƒ£ãƒ³ãƒ«: <input id="llmGenre" placeholder="ä¾‹: æ­´å²ã€ç§‘å­¦ã€é›‘å­¦" style="width:160px" /></label>
      <label style="font-size:0.9rem">é›£æ˜“åº¦: <input id="llmDifficulty" type="number" min="1" max="10" value="3" style="width:60px" /></label>
      <label style="font-size:0.9rem">LLMè‡ªå‹•é–“éš”(ç§’): <input id="llmInterval" type="number" min="3" value="10" style="width:60px" /></label>
      <label style="font-size:0.9rem">ç­”ãˆè¡¨ç¤ºç§’æ•°: <input id="llmRevealMs" type="number" min="500" value="3000" style="width:80px" /></label>
    </div>
    <div style="display:flex;gap:8px;align-items:center;margin-top:6px">
      <label style="font-size:0.9rem">1æ–‡å­—ã‚ãŸã‚Šã®å›ç­”æ™‚é–“(ç§’): <input id="perCharSec" type="number" min="0.5" step="0.5" value="3" style="width:80px" /></label>
    </div>
    <div style="display:flex;gap:8px;align-items:center;margin-top:6px;padding:8px;background:#e3f2fd;border-radius:4px">
      <label style="font-size:0.9rem;font-weight:bold;cursor:pointer">
        <input type="checkbox" id="enableGrounding" checked style="margin-right:8px;cursor:pointer;width:18px;height:18px" />
        Googleæ¤œç´¢ã‚°ãƒ©ã‚¦ãƒ³ãƒ‡ã‚£ãƒ³ã‚°ã‚’æœ‰åŠ¹ã«ã™ã‚‹
      </label>
      <span style="font-size:0.8rem;color:#666">(å•é¡Œç”Ÿæˆã«æœ€æ–°ã®ã‚¦ã‚§ãƒ–æƒ…å ±ã‚’ä½¿ç”¨)</span>
    </div>
    <div style="margin-top:8px">
      <button id="forceRefill">æ‰‹å‹•ã§è£œå……ï¼ˆãƒ†ã‚¹ãƒˆï¼‰</button>
      <span id="forceRefillResult" style="margin-left:8px"></span>
    </div>
    <button data-mode="llm" class="modeBtn">LLMã§è‡ªå‹•ç”Ÿæˆ</button>

    <h3>ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆã‹ã‚‰å•é¡Œç”Ÿæˆ</h3>
    <div style="padding:12px;background:#f5f5f5;border-radius:4px;margin-bottom:12px">
      <div style="margin-bottom:8px">
        <label style="font-weight:bold">PDF/HTMLãƒ•ã‚¡ã‚¤ãƒ«ã‚’ã‚¢ãƒƒãƒ—ãƒ­ãƒ¼ãƒ‰:</label>
        <input type="file" id="documentUpload" accept=".pdf,.html,.htm" style="margin-left:8px" />
      </div>
      <div style="display:flex;gap:8px;align-items:center;margin-top:8px">
        <label style="font-size:0.9rem">ç”Ÿæˆæ•°: <input id="docQuestionCount" type="number" min="1" max="20" value="5" style="width:60px" /></label>
        <label style="font-size:0.9rem">é›£æ˜“åº¦: <input id="docDifficulty" type="number" min="1" max="10" value="3" style="width:60px" /></label>
        <label style="font-size:0.9rem">ã‚¸ãƒ£ãƒ³ãƒ«: <input id="docGenre" placeholder="ä»»æ„" style="width:120px" /></label>
      </div>
      <div style="margin-top:8px">
        <button id="generateFromDoc" style="background:#2ecc71;color:white;border:none;padding:8px 16px;cursor:pointer;border-radius:4px">ğŸ“„ ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆã‹ã‚‰å•é¡Œç”Ÿæˆ</button>
        <span id="docGenResult" style="margin-left:8px;font-size:0.9rem"></span>
      </div>
    </div>

    <h3>å•é¡Œç·¨é›†ï¼ˆJSONé…åˆ—ï¼‰</h3>
    <textarea id="questionsText">[ { "text": "æ±äº¬ã¯æ—¥æœ¬ã®é¦–éƒ½ã¯ï¼Ÿ", "answer": "æ±äº¬" } ]</textarea>
    <div><button id="setQs">å•é¡Œã‚»ãƒƒãƒˆ</button> <button id="nextQ">æ¬¡ã®å•é¡Œé€ä¿¡</button></div>
    <div style="margin-top:8px"><button id="revealAnswer">å›ç­”è¡¨ç¤º</button></div>
    <div style="margin-top:12px">
      <button id="startGame">ã‚²ãƒ¼ãƒ é–‹å§‹</button>
      <button id="restartGame" style="margin-left:8px;background:#e74c3c;color:white;border:none;padding:8px 16px;cursor:pointer;border-radius:4px">ğŸ”„ å•é¡Œæ›´æ–°/ãƒªã‚¹ã‚¿ãƒ¼ãƒˆ</button>
    </div>
    <div id="restartResult" style="margin-top:8px;color:#27ae60;font-weight:bold"></div>
    <div id="llmStatus" style="margin-top:8px;padding:8px;background:#f39c12;color:white;border-radius:4px;display:none">
      âš ï¸ LLMè‡ªå‹•ç”ŸæˆãŒä¸€æ™‚åœæ­¢ä¸­ï¼ˆå‚åŠ è€…å¾…ã¡ï¼‰
    </div>
    <div id="generating" style="margin-top:8px;padding:8px;background:#1976d2;color:white;border-radius:4px;display:none">
      â³ ç”Ÿæˆä¸­â€¦ï¼ˆå•é¡Œã‚’å–å¾—ä¸­ã§ã™ï¼‰
    </div>

    <div id="log"></div>
    
    <div id="currentQuestion" style="margin-top:20px;padding:16px;border:2px solid #3498db;border-radius:8px;background:#ecf0f1;display:none">
      <h3 style="margin-top:0">ç¾åœ¨ã®å•é¡Œ</h3>
      <div id="currentQuestionText" style="font-size:1.2rem;margin:8px 0"></div>
      <div id="currentQuestionAnswer" style="color:#27ae60;margin:8px 0"></div>
      <div id="currentQuestionSources" style="margin-top:12px;font-size:0.9rem;color:#555"></div>
    </div>
  </div>

  <script src="/socket.io/socket.io.js"></script>
  <script src="/client.js"></script>
</body>
</html>
